---
title: "Read h5"
author: "CZ"
date: "4/1/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
#hdf5
```


#hdf5r
```{r}
#library(hdf5r)
library(dplyr)
library(cranium)
library(broom)
library(tidyverse)
library(rgl)

#devtools::install_github("beanumber/cranium")

#file <- "AT_wildtype_101_Probabilities.h5""

download_data <- function() {
  youtoo_samples <- c("01", "02", "03", "04", "05", "06", "112", "19", "21", "24")
  wildtype_samples <- c("101", "102", "103", "104", "105", "106", "107", "108", "109", "110")
  
  youtoo <- list()
  wildtype <- list()
  for(i in (1:length(youtoo_samples))){
    #youtoo
    url <- paste("https://s3.us-east-2.amazonaws.com/deltascope/AT_",youtoo_samples[[i]],"_Probabilities.h5", sep="")
    filePath = paste("./dataAPI/AT_", youtoo_samples[[i]], "_Probabilites.h5", sep="")
    download.file(url ,destfile = filePath)
    currFile <- read_h5(filePath)
    youtoo[[i]] <- currFile
    
    #wildtype
    url <- paste("https://s3.us-east-2.amazonaws.com/deltascope/AT_wildtype_",wildtype_samples[[i]],"_Probabilities.h5", sep="")
    filePath = paste("./dataAPI/AT_wildtype", wildtype_samples[[i]], "_Probabilites.h5", sep="")
    download.file(url ,destfile = filePath)
    currFile <- read_h5(filePath)
    wildtype[[i]] <- currFile
  }
  
  return(youtoo_samples)
}


download_data()

plot3d(youtoo[[1]])



```


